// Tạo một mảng chứa thông tin về các phim
var movies = [
  {
  display:false,
    id:'p1',
    src: "https://bizweb.dktcdn.net/100/330/208/files/hinh-nen-kimetsu-yaiba-ngau-6-1.jpg?v%5Cu003d1649906743187",
    alt: "Movie 1",
  title: "Thanh gương diệt quỷ",
  describe: "Thanh Gươm Diệt Quỷ - phần phim tại Phố Đèn Đỏ cuối cùng cũng đã kết thúc. Sau trận chiến khốc liệt, Tanjiro và Uzui đã thành công chặt đầu Gyutaro. Trong khi đó, Zenitsu và Inosuke hợp sức chặt đầu Daki cùng một lúc. Tuy nhiên, Gyutaro đã giải phóng Huyết thuật của mình và bao phủ khắp toàn bộ khu vực. Tanjiro tỉnh dậy và hội ngộ cùng Nezuko và Zenitsu, nhưng Inosuke và Uzui đang cận kề cái chết vì bị Gyutaro đầu độc.",
  episodes: "Tập 24",
  watchLink: "https://www.youtube.com/embed/Ypil56yin2M", // Liên kết xem phim 1
  category: 'anime',
  anotherName: "Kimetsu no YaibaLưỡi gươm diệt quỷDiệt quỷ cứu nhân",
  countryOfManufacture: "japan",
  yearOfRelease: '2019',
    type: "Phiêu lưu - mạo hiểm - kịch tính",
    author: 'Đặng vĂn Sinh',
    actor:"sinh-loan-anh-quyền"
},
  {
    
    display:false,
    id:'p2',
    src: "https://riki.edu.vn/wp-content/uploads/2019/10/14775-768x1121.jpg",
    alt: "Movie 1",
  title: "Lá thư gửi Momo (A letter to Momo)",
  describe: "“Lá thư gửi Momo” được công chiếu và giới thiệu lần đầu tiên vào năm 2011. Khi vừa ra mắt, bộ phim này đã tạo nên một làn sóng mới với hiệu ứng người xem rất tốt và nhanh chóng đạt được nhiều giải thưởng. Bộ phim hội tụ đủ mọi yếu tố: hài hước, phiêu lưu, thần thoại. Vừa ý nghĩa vừa có tính nhân văn sâu sắc. Hãy xem để nhận ra cuộc sống đáng quý và cần được nâng niu ra sao. Xem để sống chậm lại, nghĩ khác đi và yêu thương nhiều hơn…",
  episodes: "Tập 1",
  watchLink: "https://www.youtube.com/embed/SA3j3ev8dqE", // Liên kết xem phim 1
  category: 'anime',
  countryOfManufacture: "japan",
  yearOfRelease: '2010',
    type: "Phiêu lưu",
    author: 'Đặng vĂn Sinh',
    actor:"sinh-loan-anh-quyền"
  },
  {
    display:false,
    id:'p3',
    src: "https://th.bing.com/th/id/R.9082926e4c15ed8eb3d132d7b8d0d58b?rik=4djG0dLea0wG2A&pid=ImgRaw&r=0",
    alt: "Movie 1",
  title: "conan(Thám tử lừng danh)",
  describe: " Thám Tử Lừng Danh Conan được mua bản quyền và được cập nhật phát sóng mới nhất trên ứng dụng giải trí POPS. Đây là bộ phim hoạt hình chuyển thể từ truyện tranh hấp dẫn nhất: Thám Tử Lừng Danh Conan của tác giả Aoyama Gosho. Phim Conan kể về thần đồng 17 tuổi Shinichi Kudo - còn được biết đến với biệt danh “Cứu tinh của Sở Cảnh sát Nhật Bản” - người thường xuyên giúp lực lượng cảnh sát giải quyết các vụ án phức tạp.",
  episodes: "Tập 1",
  watchLink: "https://www.youtube.com/embed/CL_SiaJsm9Q", // Liên kết xem phim 1
  category: 'anime',
  countryOfManufacture: "japan",
  yearOfRelease: '2000',
    type: "Trinh thám",
    author: 'Đặng vĂn Sinh',
    actor:"sinh-loan-anh-quyền"
  },
  {
    display:false,
    id:'p4',
    src: "https://th.bing.com/th/id/R.9082926e4c15ed8eb3d132d7b8d0d58b?rik=4djG0dLea0wG2A&pid=ImgRaw&r=0",
    alt: "Movie 1",
  title: "conan(Thám tử lừng danh)",
  describe: " Thám Tử Lừng Danh Conan được mua bản quyền và được cập nhật phát sóng mới nhất trên ứng dụng giải trí POPS. Đây là bộ phim hoạt hình chuyển thể từ truyện tranh hấp dẫn nhất: Thám Tử Lừng Danh Conan của tác giả Aoyama Gosho. Phim Conan kể về thần đồng 17 tuổi Shinichi Kudo - còn được biết đến với biệt danh “Cứu tinh của Sở Cảnh sát Nhật Bản” - người thường xuyên giúp lực lượng cảnh sát giải quyết các vụ án phức tạp.",
  episodes: "Tập 1",
  watchLink: "https://www.youtube.com/embed/CL_SiaJsm9Q", // Liên kết xem phim 1
  category: 'phim chiếu rạp',
  countryOfManufacture: "japan",
  yearOfRelease: '2000',
    type: "Trinh thám",
    author: 'Đặng vĂn Sinh',
    actor:"sinh-loan-anh-quyền"
  },
  {
    display:false,
    id:'p5',
    src: "https://th.bing.com/th/id/R.9082926e4c15ed8eb3d132d7b8d0d58b?rik=4djG0dLea0wG2A&pid=ImgRaw&r=0",
    alt: "Movie 1",
  title: "conan(Thám tử lừng danh)",
  describe: " Thám Tử Lừng Danh Conan được mua bản quyền và được cập nhật phát sóng mới nhất trên ứng dụng giải trí POPS. Đây là bộ phim hoạt hình chuyển thể từ truyện tranh hấp dẫn nhất: Thám Tử Lừng Danh Conan của tác giả Aoyama Gosho. Phim Conan kể về thần đồng 17 tuổi Shinichi Kudo - còn được biết đến với biệt danh “Cứu tinh của Sở Cảnh sát Nhật Bản” - người thường xuyên giúp lực lượng cảnh sát giải quyết các vụ án phức tạp.",
  episodes: "Tập 1",
  watchLink: "https://www.youtube.com/embed/CL_SiaJsm9Q", // Liên kết xem phim 1
  category: 'âm nhạc',
  countryOfManufacture: "japan",
  yearOfRelease: '2000',
    type: "Trinh thám",
    author: 'Đặng vĂn Sinh',
    actor:"sinh-loan-anh-quyền"
  },
  {
    display:false,
    id:'p6',
    src: "https://th.bing.com/th/id/R.9082926e4c15ed8eb3d132d7b8d0d58b?rik=4djG0dLea0wG2A&pid=ImgRaw&r=0",
    alt: "Movie 1",
  title: "conan(Thám tử lừng danh)",
  describe: " Thám Tử Lừng Danh Conan được mua bản quyền và được cập nhật phát sóng mới nhất trên ứng dụng giải trí POPS. Đây là bộ phim hoạt hình chuyển thể từ truyện tranh hấp dẫn nhất: Thám Tử Lừng Danh Conan của tác giả Aoyama Gosho. Phim Conan kể về thần đồng 17 tuổi Shinichi Kudo - còn được biết đến với biệt danh “Cứu tinh của Sở Cảnh sát Nhật Bản” - người thường xuyên giúp lực lượng cảnh sát giải quyết các vụ án phức tạp.",
  episodes: "Tập 1",
  watchLink: "https://www.youtube.com/embed/CL_SiaJsm9Q", // Liên kết xem phim 1
  category: 'thể thao',
  countryOfManufacture: "japan",
  yearOfRelease: '2000',
    type: "Trinh thám",
    author: 'Đặng vĂn Sinh',
    actor:"sinh-loan-anh-quyền"
  },
  {
    display:false,
    id:'p7',
    src: "https://th.bing.com/th/id/R.9082926e4c15ed8eb3d132d7b8d0d58b?rik=4djG0dLea0wG2A&pid=ImgRaw&r=0",
    alt: "Movie 1",
  title: "conan(Thám tử lừng danh)",
  describe: " Thám Tử Lừng Danh Conan được mua bản quyền và được cập nhật phát sóng mới nhất trên ứng dụng giải trí POPS. Đây là bộ phim hoạt hình chuyển thể từ truyện tranh hấp dẫn nhất: Thám Tử Lừng Danh Conan của tác giả Aoyama Gosho. Phim Conan kể về thần đồng 17 tuổi Shinichi Kudo - còn được biết đến với biệt danh “Cứu tinh của Sở Cảnh sát Nhật Bản” - người thường xuyên giúp lực lượng cảnh sát giải quyết các vụ án phức tạp.",
  episodes: "Tập 1",
  watchLink: "https://www.youtube.com/embed/CL_SiaJsm9Q", // Liên kết xem phim 1
  category: 'phim bộ',
  countryOfManufacture: "japan",
  yearOfRelease: '2000',
    type: "Trinh thám",
    author: 'Đặng vĂn Sinh',
    actor:"sinh-loan-anh-quyền"
}
  ];
  const jsonString = JSON.stringify(movies);
localStorage.setItem('myArray', jsonString);
const getJsonString = localStorage.getItem('myArray');
const myArray = JSON.parse(getJsonString);

  var carouselIndicators = document.querySelector(".carousel-indicators");
  var carouselInner = document.querySelector(".carousel-inner");

  myArray.forEach(function (movie, index) {
    var indicatorButton = document.createElement("button");
    indicatorButton.category = "button";
    indicatorButton.dataset.bsTarget = "#carouselExampleIndicators";
    indicatorButton.dataset.bsSlideTo = index;
    indicatorButton.setAttribute("aria-label", "Slide " + (index + 1));

    if (index === 0) {
      indicatorButton.classList.add("active");
      indicatorButton.setAttribute("aria-current", "true");
    }

    carouselIndicators.appendChild(indicatorButton);

    var carouselItem = document.createElement("div");
    carouselItem.classList.add("carousel-item");

    if (index === 0) {
      carouselItem.classList.add("active");
    }

    var image = document.createElement("img");
    image.classList.add("d-block", "w-100", "img");
    image.src = movie.src;
    image.alt = movie.alt;

    var caption = document.createElement("div");
    caption.classList.add("carousel-caption");

    var title = document.createElement("h5");
    title.textContent = movie.title;

    var subtitle = document.createElement("p");
    subtitle.textContent = movie.caption;

    var watchLink = document.createElement("a");
    watchLink.classList.add("btn", "btn-primary");
    watchLink.href = movie.watchLink; // Gắn liên kết xem phim
    var icon = document.createElement("i");
    icon.classList.add("fa-solid", "fa-play", "icon");
    var watchText = document.createTextNode("Xem ngay"); // Nội dung nút "Xem ngay"
    watchLink.appendChild(watchText);
    watchLink.insertBefore(icon, watchLink.firstChild);

    caption.appendChild(title);
    caption.appendChild(subtitle);
    caption.appendChild(watchLink); // Thêm nút "Xem ngay" vào caption

    carouselItem.appendChild(image);
    carouselItem.appendChild(caption);

    carouselInner.appendChild(carouselItem);
  });

  // Khởi tạo carousel
  var carousel = new bootstrap.Carousel(
    document.querySelector("#carouselExampleIndicators"),
    {
      interval: 5000, // Đặt thời gian trôi qua giữa các slide là 5 giây
      wrap: true, // Cho phép trượt vòng qua các slide
    }
);
movies.forEach(function (movie){
  if (movie.category === 'phim bộ') {
    var movieMemory = `
    <div class="card" style="width: 12rem; height: 20rem; background-color:black;margin-right: 10px;" data-id="${movie.id}">
    <img id="watching" src="${movie.src}" class="card-img-top" alt="..." style="height: 15rem;object-fit: cover;">
    <div class="card-body" style="padding: 10px 0px">
      <p class="card-text" style="color:white; text-align:left">${movie.title}</p>
    </div>
  </div> `
    document.getElementById('series').innerHTML += movieMemory
  }
  else if (movie.category === 'âm nhạc') {
    var movieMemory = `
    <div class="card" style="width: 12rem; height: 20rem; background-color:black;margin-right: 10px;" data-id="${movie.id}">
    <img id="watching" src="${movie.src}" class="card-img-top" alt="..." style="height: 15rem;object-fit: cover;">
    <div class="card-body" style="padding: 10px 0px">
      <p class="card-text" style="color:white; text-align:left">${movie.title}</p>
    </div>
  </div> `
  document.getElementById('music').innerHTML += movieMemory
  }
  else if (movie.category === 'anime') {
    var movieMemory = `
    <div class="card" style="width: 12rem; height: 20rem; background-color:black;margin-right: 10px;" data-id="${movie.id}">
    <img id="watching" src="${movie.src}" class="card-img-top" alt="..." style="height: 15rem;object-fit: cover;">
    <div class="card-body" style="padding: 10px 0px">
      <p class="card-text" style="color:white; text-align:left">${movie.title}</p>
    </div>
  </div> `
  document.getElementById('anime').innerHTML += movieMemory
  }
  else if (movie.category === 'thể thao') {
    var movieMemory = `
    <div class="card" style="width: 12rem; height: 20rem; background-color:black;margin-right: 10px;" data-id="${movie.id}">
    <img id="watching" src="${movie.src}" class="card-img-top" alt="..." style="height: 15rem;object-fit: cover;">
    <div class="card-body" style="padding: 10px 0px">
      <p class="card-text" style="color:white; text-align:left">${movie.title}</p>
    </div>
  </div> `
  document.getElementById('sport').innerHTML += movieMemory
  }
  else if (movie.category === 'phim chiếu rạp') {
    var movieMemory = `
    <div class="card" style="width: 12rem; height: 20rem; background-color:black;margin-right: 10px;" data-id="${movie.id}">
    <img id="watching" src="${movie.src}" class="card-img-top" alt="..." style="height: 15rem;object-fit: cover;">
    <div class="card-body" style="padding: 10px 0px">
      <p class="card-text" style="color:white; text-align:left">${movie.title}</p>
    </div>
  </div> `
  document.getElementById('theaters').innerHTML += movieMemory
  }
})
var moviess = document.querySelectorAll('.card');

// Gắn sự kiện nhấp chuột cho mỗi phần tử phim
moviess.forEach(function (movie) {
  movie.addEventListener('click', function () {
    // Lấy giá trị định danh của phim được nhấp chuột
    var movieId = movie.getAttribute('data-id')
    myArray.forEach(function (detail) {
      if (movieId == detail.id) {
        detail.display = true
        localStorage.setItem('myArray', JSON.stringify(myArray));
        window.location.href = 'detail.html'
      }
    })
  })
})
